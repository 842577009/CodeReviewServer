
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as j}from"./index-74c80a46.js";import{_ as N}from"./index-c4dfb300.js";import{_ as L}from"./index.vue_vue_type_script_setup_true_name_SvgIcon_lang-dfa84782.js";import{a as O}from"./index-e71fcdfa.js";import{bb as c,a$ as g,b0 as W}from"./user-c40f11ee.js";import{b as S}from"./route-block-83d24a4e.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import{a3 as i,k as r,l as d,E as l,y as t,F as h,Y as C,x as _,C as b,B as E,Z as Y,m as Z}from"./runtime-core.esm-bundler-a63aef9e.js";import"./settings-58b03ff3.js";import"./index-c228ae8f.js";import"./vue-router-8228f7a0.js";import"./runtime-dom.esm-bundler-1ceaee55.js";const G=W(),T={data(){return{columnFields:[],commentsData:{list:[],currPage:1,pageSize:20,total:0,totalPage:0},showEditDialog:!1,dialogTitle:"",dialogType:"",batchBtnEnable:!1,search:{pageSize:20,pageIndex:1,sortBy:"createTime",sortType:"desc",queryParams:{}},departmentTree:{},listProjects:[],listUsers:[],selectedRoles:[],confirmResultItems:[],selectedRows:[],editDetail:{},editFieldRules:{name:[{required:!0,message:"用户姓名必填",trigger:"blur"}],account:[{required:!0,message:"用户账号必填",trigger:"blur"}]}}},computed:{},mounted(){this.resetSearch(),this.getColumnFields(),this.loadUserList(),this.loadProjects(),this.loadConfirmResultItems(),this.loadDepartmentTree()},methods:{loadUserList(){c.get("server/user/getAllUserDetails").then(u=>{this.listUsers=u.data})},loadProjects(){c.get(`server/project/queryProjectInDept?deptId=${this.search.queryParams.departmentId}`).then(u=>{this.listProjects=u.data})},loadConfirmResultItems(){c.get("server/column/queryConfirmResultDictItems").then(u=>{this.confirmResultItems=u.data})},getColumnFields(){c.get("server/column/queryColumns").then(u=>{this.columnFields=u.data})},loadDepartmentTree(){c.get("server/dept/getDeptTree").then(u=>{this.departmentTree=u.data})},clickSearch(){c.post("/server/comment/queryComments",this.search).then(u=>{this.commentsData=u.data})},resetSearch(){this.search.queryParams={identifier:null,projectId:null,departmentId:null,commitUser:null,realConfirmUser:G.account,assignConfirmUser:null,confirmResult:null},this.clickSearch()},handleSizeChange(u){this.search.pageSize=u,this.clickSearch()},handleCurrentChange(u){this.search.pageIndex=u,this.clickSearch()},getSelectedRows(u){this.selectedRows=u,this.selectedRows&&this.selectedRows.length!==0?this.batchBtnEnable=!0:this.batchBtnEnable=!1},viewSingle(u){this.showEditDialog=!1,c.get(`server/comment/initViewReqBody?identifier=${u.identifier}`).then(o=>{this.editDetail=o.data,this.dialogTitle="评审意见详情",this.dialogType="VIEW",this.showEditDialog=!0}).catch(o=>{g({type:"error",message:`编辑失败：${o}`})})},saveOperation(){this.$refs.editDetailForm.validate(u=>{if(!u)g({type:"error",message:"参数内容填写有误，请检查"});else{let o;if(this.dialogType==="CONFIRM")o="server/comment/confirmComment";else{g({type:"error",message:"请求操作类型不合法"});return}c.post(o,this.editDetail).then(F=>{F.code===0?(g({type:"success",message:"保存成功"}),this.showEditDialog=!1,this.clickSearch()):g({type:"error",message:`编辑失败：${F.message}`})})}})},cancelEditOperation(){this.showEditDialog=!1},cancelCreateOperation(){this.showEditDialog=!1},confirmSingle(u){this.showEditDialog=!1,c.get(`server/comment/initConfirmReqBody?identifier=${u.identifier}`).then(o=>{this.editDetail=o.data,this.dialogTitle="评审意见确认",this.dialogType="CONFIRM",this.showEditDialog=!0}).catch(o=>{g({type:"error",message:`编辑失败：${o}`})})}}};const H={key:0},J={class:"dialog-footer"};function K(u,o,F,Q,a,n){const I=O,D=i("el-option"),v=i("el-select"),m=i("el-form-item"),y=i("el-col"),V=i("el-row"),B=i("el-input"),U=i("el-tree-select"),R=L,q=i("el-icon"),f=i("el-button"),k=i("el-form"),A=N,P=j,w=i("el-table-column"),x=i("el-table"),z=i("el-pagination"),M=i("el-dialog");return r(),d("div",null,[l(I,{title:"我确认的",content:"本页面展示您所有曾经处理确认过的评审意见内容，您可以查看相关内容，或者对确认的信息进行重新修改。"}),l(P,{title:"搜索条件"},{default:t(()=>[l(A,null,{default:t(()=>[l(k,{model:a.search,size:"default","label-width":"120px"},{default:t(()=>[l(V,null,{default:t(()=>[l(y,{span:6},{default:t(()=>[l(m,{label:"检视人员"},{default:t(()=>[l(v,{modelValue:a.search.queryParams.commitUser,"onUpdate:modelValue":o[0]||(o[0]=e=>a.search.queryParams.commitUser=e),modelModifiers:{trim:!0},placeholder:"请输入姓名或账号查询",clearable:"",filterable:""},{default:t(()=>[(r(!0),d(h,null,C(a.listUsers,(e,s)=>(r(),_(D,{key:e.account,label:e.name,value:e.account},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(y,{span:6},{default:t(()=>[l(m,{label:"确认结果"},{default:t(()=>[l(v,{modelValue:a.search.queryParams.confirmResult,"onUpdate:modelValue":o[1]||(o[1]=e=>a.search.queryParams.confirmResult=e),modelModifiers:{trim:!0},placeholder:"输入评审意见的确认状态",clearable:""},{default:t(()=>[(r(!0),d(h,null,C(a.confirmResultItems,(e,s)=>(r(),_(D,{key:e.value,label:e.showName,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(V,null,{default:t(()=>[l(y,{span:6},{default:t(()=>[l(m,{label:"唯一ID"},{default:t(()=>[l(B,{modelValue:a.search.queryParams.identifier,"onUpdate:modelValue":o[2]||(o[2]=e=>a.search.queryParams.identifier=e),placeholder:"输入评审意见唯一ID进行查询",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(y,{span:6},{default:t(()=>[l(m,{label:"归属部门"},{default:t(()=>[l(U,{modelValue:a.search.queryParams.departmentId,"onUpdate:modelValue":o[3]||(o[3]=e=>a.search.queryParams.departmentId=e),data:a.departmentTree,"render-after-expand":!1,"check-strictly":"true",onChange:n.loadProjects},null,8,["modelValue","data","onChange"])]),_:1})]),_:1}),l(y,{span:6},{default:t(()=>[l(m,{label:"归属项目"},{default:t(()=>[l(v,{modelValue:a.search.queryParams.projectId,"onUpdate:modelValue":o[4]||(o[4]=e=>a.search.queryParams.projectId=e),modelModifiers:{trim:!0},placeholder:"请选择",clearable:"",filterable:""},{default:t(()=>[(r(!0),d(h,null,C(a.listProjects,(e,s)=>(r(),_(D,{key:e.id,label:e.projectName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(f,{type:"primary",onClick:n.clickSearch},{icon:t(()=>[l(q,null,{default:t(()=>[l(R,{name:"ep:search"})]),_:1})]),default:t(()=>[b(" 查询 ")]),_:1},8,["onClick"]),l(f,{onClick:n.resetSearch},{default:t(()=>[b(" 重置 ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),l(P,null,{default:t(()=>[l(x,{border:"","highlight-current-row":"",data:a.commentsData.list,height:"100%",onSelectionChange:n.getSelectedRows},{default:t(()=>[l(w,{type:"selection",width:"55"}),(r(!0),d(h,null,C(a.columnFields,(e,s)=>(r(),d(h,null,[e.showInWebTable?(r(),_(w,{key:e.columnCode,prop:e.columnCode,label:e.showName,width:e.webTableColumnWidth,index:s},null,8,["prop","label","width","index"])):E("",!0)],64))),256)),l(w,{fixed:"right",label:"操作",width:"200"},{default:t(e=>[l(f,{link:"",type:"primary",size:"small",onClick:s=>n.viewSingle(e.row)},{default:t(()=>[b(" 查看 ")]),_:2},1032,["onClick"]),l(f,{link:"",type:"primary",size:"small",onClick:s=>n.confirmSingle(e.row)},{default:t(()=>[b(" 确认 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"]),l(z,{class:"pageination-style",background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":a.commentsData.pageSize,total:a.commentsData.total,"current-page":a.commentsData.currPage,onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange},null,8,["page-size","total","current-page","onSizeChange","onCurrentChange"])]),_:1}),l(M,{modelValue:a.showEditDialog,"onUpdate:modelValue":o[5]||(o[5]=e=>a.showEditDialog=e),title:a.dialogTitle},Y({default:t(()=>[l(k,{ref:"editDetailForm",model:a.editDetail,size:"default","label-width":"120px",rules:a.editFieldRules},{default:t(()=>[(r(!0),d(h,null,C(a.editDetail.fieldModelList,(e,s)=>(r(),d(h,null,[e.show?(r(),d("div",H,[e.inputType=="TEXT"?(r(),_(m,{key:0,label:e.showName},{default:t(()=>[l(B,{modelValue:a.editDetail.fieldModelList[s].valuePair.value,"onUpdate:modelValue":p=>a.editDetail.fieldModelList[s].valuePair.value=p,disabled:e.editable===!1},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label"])):E("",!0),e.inputType=="COMBO_BOX"?(r(),_(m,{key:1,label:e.showName},{default:t(()=>[l(v,{modelValue:a.editDetail.fieldModelList[s].valuePair,"onUpdate:modelValue":p=>a.editDetail.fieldModelList[s].valuePair=p,disabled:e.editable===!1,filterable:""},{default:t(()=>[(r(!0),d(h,null,C(e.enumValues,p=>(r(),_(D,{label:p.showName,value:p},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label"])):E("",!0),e.inputType=="TEXTAREA"?(r(),_(m,{key:2,label:e.showName},{default:t(()=>[l(B,{modelValue:a.editDetail.fieldModelList[s].valuePair.value,"onUpdate:modelValue":p=>a.editDetail.fieldModelList[s].valuePair.value=p,rows:5,disabled:e.editable===!1,type:"textarea"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label"])):E("",!0)])):E("",!0)],64))),256))]),_:1},8,["model","rules"])]),_:2},[a.dialogType!=="VIEW"?{name:"footer",fn:t(()=>[Z("span",J,[l(f,{onClick:n.cancelEditOperation},{default:t(()=>[b(" 取消 ")]),_:1},8,["onClick"]),l(f,{type:"primary",onClick:n.saveOperation},{default:t(()=>[b(" 保存 ")]),_:1},8,["onClick"])])]),key:"0"}:void 0]),1032,["modelValue","title"])])}typeof S=="function"&&S(T);const me=X(T,[["render",K],["__scopeId","data-v-c3dcaf64"]]);export{me as default};
//# sourceMappingURL=myconfirmedcomment-39fd63a6.js.map
